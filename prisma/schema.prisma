generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"    // ← CAMBIAR de sqlite a postgresql
  url      = env("DATABASE_URL")
}

model Job {
  id           String     @id @default(cuid())    // ← CAMBIAR de Int a String
  title        String
  description  String
  location     String?
  type         String?
  active       Boolean    @default(true)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  deletedAt    DateTime?
  deletedBy    String?
  status       String     @default("OPEN")
  filledAt     DateTime?
  hiredName    String?
  hiredContact String?
  hiredNotes   String?
  audits       JobAudit[]
}

model JobAudit {
  id        String   @id @default(cuid())    // ← CAMBIAR de Int a String
  jobId     String                           // ← CAMBIAR de Int a String
  action    String
  actor     String?
  meta      String?
  createdAt DateTime @default(now())
  job       Job      @relation(fields: [jobId], references: [id], onDelete: Cascade)

  @@index([jobId])
  @@index([createdAt])
}